(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{14:function(e,t,a){e.exports={galleryItem:"ImageGalleryItem_galleryItem__1-hKf",imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2XIRJ"}},15:function(e,t,a){e.exports={overlay:"Modal_overlay__22-Mq",modal:"Modal_modal__1AbWy"}},19:function(e,t,a){e.exports={button:"Button_button__F5r2t"}},20:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__1CUQT"}},27:function(e,t,a){},28:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(5),o=a.n(c),s=(a(27),a(17)),i=a(6),l=a(7),u=a(12),h=a(11),m=(a(28),a(18)),b=a.n(m),d=a(10),f=(a(49),a(19)),g=a.n(f),j=a(2),p=function(e){var t=e.loadMoreBtn;return Object(j.jsx)("button",{type:"button",className:g.a.button,onClick:t,children:"Load more"})},y=a(14),O=a.n(y),v=function(e){var t=e.imageItem,a=e.onItemClick;return Object(j.jsx)("li",{className:O.a.galleryItem,onClick:function(){a(t)},children:Object(j.jsx)("img",{src:t.webformatURL,alt:t.tags,className:O.a.imageGalleryItem})})},_=a(20),x=a.n(_),I=function(e){var t=e.images,a=e.showModal,n=function(e){a(e)};return Object(j.jsx)("ul",{className:x.a.imageGallery,children:t.map((function(e){return Object(j.jsx)(v,{imageItem:e,onItemClick:n},e.id)}))})},w=a(15),S=a.n(w),k=document.getElementById("modal-root"),M=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleOverlayClick=function(t){t.target===t.currentTarget&&e.props.closeModal()},e.handleEscPressed=function(t){"Escape"===t.key&&e.props.closeModal()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscPressed)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscPressed)}},{key:"render",value:function(){return Object(c.createPortal)(Object(j.jsx)("div",{className:S.a.overlay,onClick:this.handleOverlayClick,children:Object(j.jsx)("div",{className:S.a.modal,children:this.props.children})}),k)}}]),a}(n.Component),Q=a(8),P=a.n(Q),B=a(21),C=a(0),N=function(e){var t=e.onSubmit;return Object(j.jsx)("header",{className:P.a.searchbar,children:Object(j.jsxs)("form",{className:P.a.form,onSubmit:function(e){e.preventDefault();var a=e.target.query.value;t(a)},children:[Object(j.jsx)("button",{type:"submit",className:P.a.formBtn,children:Object(j.jsx)(C.b.Provider,{value:{className:"".concat(P.a.searchIcon)},children:Object(j.jsx)(B.a,{})})}),Object(j.jsx)("input",{className:P.a.formInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"query"})]})})},E=a(16),G=a.n(E),q=a(22),L=a(4),F=a(9),T=Object(F.a)("baseUrl"),U=Object(F.a)("privatKey"),D=Object(F.a)("options"),A=Object(F.a)("page"),J=Object(F.a)("perPage"),R=function(){function e(){Object(i.a)(this,e),Object.defineProperty(this,T,{writable:!0,value:"https://pixabay.com/api/"}),Object.defineProperty(this,U,{writable:!0,value:"24000530-001c810234599b9b4d7fbf89c"}),Object.defineProperty(this,D,{writable:!0,value:{imageType:"photo",orientation:"horizontal",safesearch:!0}}),Object.defineProperty(this,A,{writable:!0,value:1}),Object.defineProperty(this,J,{writable:!0,value:12}),this.searchQuery=""}return Object(l.a)(e,[{key:"fetchSearch",value:function(){var e=Object(q.a)(G.a.mark((function e(){var t,a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Object(L.a)(this,T)[T],"?key=").concat(Object(L.a)(this,U)[U],"&q=").concat(this.searchQuery,"&image_type=").concat(Object(L.a)(this,D)[D].imageType,"&orientation=").concat(Object(L.a)(this,D)[D].orientation,"&safesearch=").concat(Object(L.a)(this,D)[D].safesearch,"&page=").concat(Object(L.a)(this,A)[A],"&per_page=").concat(Object(L.a)(this,J)[J]));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,Object(L.a)(this,A)[A]+=1,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetPage",value:function(){Object(L.a)(this,A)[A]=1}}]),e}(),K=new R,Y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={pageQuery:1,imagesQuery:null,images:[],modalImage:null,loading:!1},e.handleImages=function(t){if(!t)return d.b.warn("Enter some query!"),e.setState({images:[]});e.setState({pageQuery:1,imagesQuery:t})},e.fetchImages=function(){var t=e.state,a=t.imagesQuery,n=t.pageQuery;e.setState({loading:!0}),K.searchQuery=a,K.fetchSearch().then((function(t){0===t.hits.length&&d.b.error("No images with this query!"),n>1?e.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(t.hits))}})):e.setState({images:t.hits})})).catch((function(e){return d.b.error(e.code)})).finally((function(){e.setState({loading:!1})}))},e.loadMore=function(){e.setState((function(e){return{pageQuery:e.pageQuery+1}}))},e.showModal=function(t){e.setState({modalImage:t})},e.closeModal=function(){e.setState({modalImage:null})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.state,n=a.imagesQuery,r=a.pageQuery;t.imagesQuery!==n&&(K.resetPage(),this.fetchImages()),t.pageQuery!==r&&this.fetchImages()}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.modalImage,n=e.loading;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(N,{onSubmit:this.handleImages}),Object(j.jsx)(I,{images:t,showModal:this.showModal}),n&&Object(j.jsx)(b.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80,style:{textAlign:"center"}}),t.length>0&&Object(j.jsx)(p,{loadMoreBtn:this.loadMore}),a&&Object(j.jsx)(M,{closeModal:this.closeModal,children:Object(j.jsx)("img",{src:a.largeImageURL,alt:a.tags})}),Object(j.jsx)(d.a,{position:"top-right",autoClose:3e3})]})}}]),a}(r.a.Component),W=Y;o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(W,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__3eTb7",form:"Searchbar_form__1RvKa",formBtn:"Searchbar_formBtn__1r3cD",searchIcon:"Searchbar_searchIcon__3qJbs",formBtnLabel:"Searchbar_formBtnLabel__BHYmt",formInput:"Searchbar_formInput__6YlYi"}}},[[52,1,2]]]);
//# sourceMappingURL=main.eae675ce.chunk.js.map